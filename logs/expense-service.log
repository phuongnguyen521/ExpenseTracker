2025-07-29 18:37:40 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 16508 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 18:37:40 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 18:37:40 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 18:37:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 18:37:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 298 ms. Found 1 JPA repository interface.
2025-07-29 18:37:43 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 18:37:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 18:37:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 18:37:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 18:37:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 18:37:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4281 ms
2025-07-29 18:37:45 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 18:37:45 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 18:37:45 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 18:37:48 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 18:37:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 18:37:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@40105b39
2025-07-29 18:37:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 18:37:50 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 18:37:50 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 18:37:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 18:37:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 18:37:52 [main] DEBUG org.hibernate.SQL - 
    create table app_user (
        id bigint not null auto_increment,
        full_name varchar(100) not null,
        password varchar(255) not null,
        role enum ('ADMIN','USER'),
        username varchar(50) not null,
        primary key (id)
    ) engine=InnoDB
2025-07-29 18:37:52 [main] DEBUG org.hibernate.SQL - 
    create table expense (
        id bigint not null auto_increment,
        account varchar(255),
        amount float(53) not null,
        category varchar(255),
        date date,
        expense_type integer not null,
        note varchar(255),
        user_id bigint,
        primary key (id)
    ) engine=InnoDB
2025-07-29 18:37:52 [main] DEBUG org.hibernate.SQL - 
    alter table app_user 
       drop index UK3k4cplvh82srueuttfkwnylq0
2025-07-29 18:37:52 [main] DEBUG org.hibernate.SQL - 
    alter table app_user 
       add constraint UK3k4cplvh82srueuttfkwnylq0 unique (username)
2025-07-29 18:37:52 [main] DEBUG org.hibernate.SQL - 
    alter table expense 
       add constraint FK18n87d1yx5s1pr35h5vy9gycr 
       foreign key (user_id) 
       references app_user (id)
2025-07-29 18:37:53 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 18:37:53 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 18:37:54 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'asyncExpenseController' defined in file [F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main\com\phuong\controller\AsyncExpenseController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'asyncExpenseServiceImpl' defined in file [F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main\com\phuong\service\impl\AsyncExpenseServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'expenseRepository' defined in com.phuong.repository.ExpenseRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.phuong.repository.ExpenseRepository.findByUserIdAndDateBetweenOrderByDateDesc(java.lang.Long,java.time.LocalDateTime,java.time.LocalDateTime); Reason: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
2025-07-29 18:37:54 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 18:37:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-29 18:37:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-29 18:37:54 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-29 18:37:54 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-29 18:37:54 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'asyncExpenseController' defined in file [F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main\com\phuong\controller\AsyncExpenseController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'asyncExpenseServiceImpl' defined in file [F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main\com\phuong\service\impl\AsyncExpenseServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'expenseRepository' defined in com.phuong.repository.ExpenseRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.phuong.repository.ExpenseRepository.findByUserIdAndDateBetweenOrderByDateDesc(java.lang.Long,java.time.LocalDateTime,java.time.LocalDateTime); Reason: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.phuong.ExpenseServiceApplication.main(ExpenseServiceApplication.java:16)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'asyncExpenseServiceImpl' defined in file [F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main\com\phuong\service\impl\AsyncExpenseServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'expenseRepository' defined in com.phuong.repository.ExpenseRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.phuong.repository.ExpenseRepository.findByUserIdAndDateBetweenOrderByDateDesc(java.lang.Long,java.time.LocalDateTime,java.time.LocalDateTime); Reason: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 21 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'expenseRepository' defined in com.phuong.repository.ExpenseRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.phuong.repository.ExpenseRepository.findByUserIdAndDateBetweenOrderByDateDesc(java.lang.Long,java.time.LocalDateTime,java.time.LocalDateTime); Reason: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 35 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.phuong.repository.ExpenseRepository.findByUserIdAndDateBetweenOrderByDateDesc(java.lang.Long,java.time.LocalDateTime,java.time.LocalDateTime); Reason: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:120)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:104)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:92)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:92)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:434)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$4(RepositoryFactoryBeanSupport.java:350)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:356)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 45 common frames omitted
Caused by: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: At 1:66 and token 'BETWEEN', mismatched input 'BETWEEN', expecting one of the following tokens: <EOF>, ',', '[', '/', '||', '.', '*', ASC, BY, DAY, DESC, EPOCH, EXCEPT, FETCH, HOUR, INTERSECT, LIMIT, MINUTE, MONTH, NANOSECOND, NULLS, OFFSET, QUARTER, SECOND, UNION, WEEK, YEAR, '+', '-'; Bad HQL grammar [SELECT e FROM Expense e WHERE e.user.id = :userId ORDER BY e.date BETWEEN :startDate AND :endDate ORDER BY e.date DESC]
	at org.springframework.data.jpa.repository.query.BadJpqlGrammarErrorListener.syntaxError(BadJpqlGrammarErrorListener.java:53)
	at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)
	at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)
	at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)
	at org.springframework.data.jpa.repository.query.HqlParser.start(HqlParser.java:346)
	at org.springframework.data.jpa.repository.query.JpaQueryEnhancer.parse(JpaQueryEnhancer.java:104)
	at org.springframework.data.jpa.repository.query.JpaQueryEnhancer$HqlQueryParser.<init>(JpaQueryEnhancer.java:319)
	at org.springframework.data.jpa.repository.query.JpaQueryEnhancer$HqlQueryParser.parseQuery(JpaQueryEnhancer.java:331)
	at org.springframework.data.jpa.repository.query.JpaQueryEnhancer.forHql(JpaQueryEnhancer.java:167)
	at org.springframework.data.jpa.repository.query.QueryEnhancerFactory.forQuery(QueryEnhancerFactory.java:68)
	at org.springframework.data.jpa.repository.query.StringQuery.<init>(StringQuery.java:100)
	at org.springframework.data.jpa.repository.query.StringQuery.<init>(StringQuery.java:79)
	at org.springframework.data.jpa.repository.query.ExpressionBasedStringQuery.<init>(ExpressionBasedStringQuery.java:65)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.<init>(AbstractStringBasedJpaQuery.java:87)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:65)
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:49)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:174)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:254)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:116)
	... 57 common frames omitted
2025-07-29 18:41:49 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 12064 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 18:41:49 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 18:41:49 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 18:41:51 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 18:41:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 226 ms. Found 1 JPA repository interface.
2025-07-29 18:41:52 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 18:41:53 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 18:41:53 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 18:41:53 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 18:41:53 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 18:41:53 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3643 ms
2025-07-29 18:41:53 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 18:41:54 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 18:41:54 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 18:41:54 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 18:41:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 18:41:56 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@162e29a1
2025-07-29 18:41:56 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 18:41:56 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 18:41:56 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 18:41:56 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 18:41:57 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 18:41:58 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 18:41:58 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 18:42:00 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 18:42:00 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 18:42:00 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 18:42:00 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 18:42:00 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'asyncExpenseController' method 
com.phuong.controller.AsyncExpenseController#generateCategoryReport(Long, LocalDate, LocalDate)
to {GET [/api/v1/expenses/user/{userId}/summary]}: There is already 'asyncExpenseController' bean method
com.phuong.controller.AsyncExpenseController#getExpenseSummary(Long, LocalDate, LocalDate) mapped.
2025-07-29 18:42:00 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 18:42:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-29 18:42:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-29 18:42:00 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-29 18:42:00 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-29 18:42:00 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'asyncExpenseController' method 
com.phuong.controller.AsyncExpenseController#generateCategoryReport(Long, LocalDate, LocalDate)
to {GET [/api/v1/expenses/user/{userId}/summary]}: There is already 'asyncExpenseController' bean method
com.phuong.controller.AsyncExpenseController#getExpenseSummary(Long, LocalDate, LocalDate) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.phuong.ExpenseServiceApplication.main(ExpenseServiceApplication.java:16)
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'asyncExpenseController' method 
com.phuong.controller.AsyncExpenseController#generateCategoryReport(Long, LocalDate, LocalDate)
to {GET [/api/v1/expenses/user/{userId}/summary]}: There is already 'asyncExpenseController' bean method
com.phuong.controller.AsyncExpenseController#getExpenseSummary(Long, LocalDate, LocalDate) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:676)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:637)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:331)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:507)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:84)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$2(AbstractHandlerMethodMapping.java:298)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:296)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:265)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:224)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 18 common frames omitted
2025-07-29 18:55:01 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 12224 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 18:55:01 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 18:55:01 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 18:55:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 18:55:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 269 ms. Found 1 JPA repository interface.
2025-07-29 18:55:04 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 18:55:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 18:55:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 18:55:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 18:55:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 18:55:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3987 ms
2025-07-29 18:55:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 18:55:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 18:55:06 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 18:55:06 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 18:55:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 18:55:09 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1045, SQLState: 28000
2025-07-29 18:55:09 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)
2025-07-29 18:55:09 [main] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:336)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1442)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1513)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.phuong.ExpenseServiceApplication.main(ExpenseServiceApplication.java:16)
Caused by: java.sql.SQLException: Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:837)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:420)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:122)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:368)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:205)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:483)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:571)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:101)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:483)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 35 common frames omitted
2025-07-29 18:55:09 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 18:55:09 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (null)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 18:55:10 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 18:55:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 18:55:11 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1045, SQLState: 28000
2025-07-29 18:55:11 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)
2025-07-29 18:55:11 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
2025-07-29 18:55:11 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
2025-07-29 18:55:11 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-29 18:55:11 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-29 18:55:11 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.phuong.ExpenseServiceApplication.main(ExpenseServiceApplication.java:16)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 15 common frames omitted
Caused by: org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution [Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:70)
	at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:65)
	at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:570)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:72)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 19 common frames omitted
Caused by: java.sql.SQLException: Access denied for user 'Phuong'@'14.186.222.23' (using password: NO)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:837)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:420)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:122)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:368)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:205)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:483)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:571)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:101)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:483)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 40 common frames omitted
2025-07-29 18:55:35 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 9380 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 18:55:35 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 18:55:35 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 18:55:38 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 18:55:38 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 238 ms. Found 1 JPA repository interface.
2025-07-29 18:55:39 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 18:55:40 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 18:55:40 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 18:55:40 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 18:55:40 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 18:55:40 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4231 ms
2025-07-29 18:55:40 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 18:55:40 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 18:55:40 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 18:55:41 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 18:55:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 18:55:43 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@40105b39
2025-07-29 18:55:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 18:55:43 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 18:55:43 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 18:55:43 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 18:55:45 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 18:55:46 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 18:55:47 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 18:55:48 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 18:55:48 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 18:55:48 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 18:55:48 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 18:55:49 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 18:55:50 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 18:55:50 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 18:55:50 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 18:55:50 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 18:55:50 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 18:55:51 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 18:55:51 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 18:55:51 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 18:55:51 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753790151635 with initial instances count: 1
2025-07-29 18:55:51 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 18:55:51 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753790151642, current=UP, previous=STARTING]
2025-07-29 18:55:51 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 18:55:51 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 18:55:51 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 18:55:51 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 16.903 seconds (process running for 18.156)
2025-07-29 18:55:51 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:05:15 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 11460 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:05:15 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:05:15 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:05:17 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:05:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 189 ms. Found 1 JPA repository interface.
2025-07-29 19:05:18 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:05:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:05:19 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:05:19 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:05:19 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:05:19 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3859 ms
2025-07-29 19:05:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:05:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:05:20 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:05:20 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:05:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:05:22 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cc9a948
2025-07-29 19:05:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:05:22 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:05:22 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:05:22 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:05:23 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:05:24 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:05:25 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:05:26 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:05:26 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:05:26 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:05:26 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:05:27 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:05:27 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:05:27 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:05:27 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:05:27 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:05:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:05:28 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:05:28 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:05:28 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:05:28 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753790728160 with initial instances count: 3
2025-07-29 19:05:28 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:05:28 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753790728166, current=UP, previous=STARTING]
2025-07-29 19:05:28 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 19:05:28 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:05:28 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:05:28 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:05:28 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 13.823 seconds (process running for 15.229)
2025-07-29 19:12:53 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 18912 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:12:53 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:12:53 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:12:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:12:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 290 ms. Found 1 JPA repository interface.
2025-07-29 19:12:57 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:12:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:12:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:12:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:12:59 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:12:59 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5461 ms
2025-07-29 19:13:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:13:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:13:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:13:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:13:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:13:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@647ce968
2025-07-29 19:13:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:13:02 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:13:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:13:02 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:13:05 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:13:06 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:13:07 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:13:08 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:13:08 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:13:08 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:13:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:13:11 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:13:11 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:13:11 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:13:11 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:13:12 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:13:12 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:13:13 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:13:13 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:13:13 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:13:13 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753791193565 with initial instances count: 3
2025-07-29 19:13:13 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:13:13 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753791193573, current=UP, previous=STARTING]
2025-07-29 19:13:13 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 19:13:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:13:13 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:13:13 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:13:13 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 20.893 seconds (process running for 22.387)
2025-07-29 19:14:31 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 19:14:31 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 19:14:31 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-29 19:14:31 [http-nio-8081-exec-2] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: ddd8e110 - Message: No static resource api/v1/expenses/1.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/expenses/1.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:15:22 [http-nio-8081-exec-3] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:15:27 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 19:15:27 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:15:39 [AsyncTask-1] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ResourceNotFoundException: User not found with Id : 1
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ResourceNotFoundException: User not found with Id : 1
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:155)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 19:16:15 [http-nio-8081-exec-9] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:16:15 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 19:16:15 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 19:16:25 [ForkJoinPool.commonPool-worker-1] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:16:25 [AsyncTask-2] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:331)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	... 15 common frames omitted
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:17:46 [http-nio-8081-exec-7] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:17:46 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:17:46 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:18:07 [ForkJoinPool.commonPool-worker-2] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:18:24 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:18:24 [http-nio-8081-exec-1] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: 763e4330 - Message: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:18:36 [http-nio-8081-exec-2] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:18:36 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:18:36 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:19:09 [ForkJoinPool.commonPool-worker-2] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:19:09 [http-nio-8081-exec-3] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: 75d277b5 - Message: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:19:32 [http-nio-8081-exec-8] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:19:32 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:19:32 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 19:19:44 [ForkJoinPool.commonPool-worker-2] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:19:44 [AsyncTask-5] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:331)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.helpAsyncBlocker(ForkJoinPool.java:1430)
	at java.base/java.util.concurrent.ForkJoinPool.helpAsyncBlocker(ForkJoinPool.java:2413)
	at java.base/java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1887)
	at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2117)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:153)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$validateUserExistAsync$11(AsyncExpenseServiceImpl.java:313)
	... 15 common frames omitted
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 17 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'flatMap' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 19:23:24 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:28:24 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:29:11 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 9056 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:29:11 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:29:11 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:29:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:29:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 188 ms. Found 1 JPA repository interface.
2025-07-29 19:29:14 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:29:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:29:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:29:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:29:16 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:29:16 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4487 ms
2025-07-29 19:29:17 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:29:17 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:29:17 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:29:18 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:29:18 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:29:19 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@647ce968
2025-07-29 19:29:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:29:19 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:29:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:29:20 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:29:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:29:22 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:29:22 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:29:23 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:29:23 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:29:23 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:29:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:29:24 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:29:25 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:29:25 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:29:25 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:29:25 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:29:25 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:29:26 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:29:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:29:26 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:29:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753792166684 with initial instances count: 3
2025-07-29 19:29:26 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:29:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753792166692, current=UP, previous=STARTING]
2025-07-29 19:29:26 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 19:29:26 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:29:26 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:29:26 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 16.321 seconds (process running for 17.634)
2025-07-29 19:29:26 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:29:33 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 19:29:33 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 19:29:33 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-29 19:29:41 [http-nio-8081-exec-2] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 19:29:41 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 19:29:41 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 19:29:42 [ForkJoinPool.commonPool-worker-1] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 19:29:42 [AsyncTask-1] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:332)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	... 8 common frames omitted
2025-07-29 19:30:07 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 19420 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:30:07 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:30:07 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:30:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:30:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 253 ms. Found 1 JPA repository interface.
2025-07-29 19:30:10 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:30:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:30:11 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:30:11 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:30:11 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:30:11 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4282 ms
2025-07-29 19:30:11 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:30:12 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:30:12 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:30:12 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:30:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:30:14 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4bc9451b
2025-07-29 19:30:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:30:14 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:30:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:30:14 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:30:16 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:30:17 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:30:17 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:30:19 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:30:19 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:30:19 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:30:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:30:21 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:30:21 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:30:21 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:30:21 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:30:21 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:30:21 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:30:22 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:30:23 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:30:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:30:23 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:30:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753792223211 with initial instances count: 3
2025-07-29 19:30:23 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:30:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753792223225, current=UP, previous=STARTING]
2025-07-29 19:30:23 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 19:30:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:30:23 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:30:23 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:30:23 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 17.236 seconds (process running for 18.271)
2025-07-29 19:35:06 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 2592 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:35:06 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:35:06 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:35:07 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:35:07 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 158 ms. Found 1 JPA repository interface.
2025-07-29 19:35:08 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:35:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:35:08 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:35:08 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:35:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:35:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2817 ms
2025-07-29 19:35:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:35:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:35:09 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:35:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:35:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:35:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@162e29a1
2025-07-29 19:35:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:35:11 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:35:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:35:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:35:13 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:35:14 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:35:14 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:35:15 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:35:15 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:35:15 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:35:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:35:16 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:35:16 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:35:16 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:35:16 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:35:16 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:35:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:35:17 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:35:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:35:17 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:35:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753792517780 with initial instances count: 1
2025-07-29 19:35:17 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:35:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753792517793, current=UP, previous=STARTING]
2025-07-29 19:35:17 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081: registering service...
2025-07-29 19:35:17 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/SE150998.mshome.net:expense-service:8081 - registration status: 204
2025-07-29 19:35:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:35:17 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:35:17 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 12.646 seconds (process running for 13.46)
2025-07-29 19:43:52 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 9684 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 19:43:52 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 19:43:52 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 19:44:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 19:44:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 296 ms. Found 1 JPA repository interface.
2025-07-29 19:44:02 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 19:44:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 19:44:04 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 19:44:04 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 19:44:04 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 19:44:04 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 11899 ms
2025-07-29 19:44:05 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 19:44:05 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 19:44:05 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 19:44:05 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 19:44:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 19:44:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@25587290
2025-07-29 19:44:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 19:44:07 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.62 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-07-29 19:44:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 19:44:07 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.62
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 19:44:09 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 19:44:10 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 19:44:11 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 19:44:12 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 19:44:12 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 19:44:12 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 19:44:12 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 19:44:13 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 19:44:14 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 19:44:16 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 19:44:16 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 19:44:16 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 19:44:16 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 19:44:16 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 19:44:16 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 19:44:16 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 19:44:17 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 19:44:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 19:44:17 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 19:44:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753793057783 with initial instances count: 1
2025-07-29 19:44:17 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 19:44:17 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753793057798, current=UP, previous=STARTING]
2025-07-29 19:44:17 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 19:44:17 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 19:44:17 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 19:44:17 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 19:44:18 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 19:44:19 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 19:44:19 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 29.923 seconds (process running for 32.783)
2025-07-29 19:49:16 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:09:59 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 7748 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:09:59 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:09:59 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:10:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:10:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 243 ms. Found 1 JPA repository interface.
2025-07-29 20:10:02 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:10:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:10:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:10:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:10:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:10:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4651 ms
2025-07-29 20:10:04 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:10:04 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:10:04 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:10:05 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:10:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:10:14 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59d29065
2025-07-29 20:10:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:10:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:10:15 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:10:16 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:10:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:10:20 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:10:21 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:10:21 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:10:21 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:10:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:10:22 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:10:23 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:10:25 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:10:25 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:10:25 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:10:25 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:10:26 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:10:26 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:10:26 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:10:27 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:10:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:10:27 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:10:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753794627452 with initial instances count: 2
2025-07-29 20:10:27 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:10:27 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753794627460, current=UP, previous=STARTING]
2025-07-29 20:10:27 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:10:27 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:10:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:10:27 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:10:28 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:10:29 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:10:29 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 32.85 seconds (process running for 34.978)
2025-07-29 20:13:44 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 20:13:44 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 20:13:44 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-29 20:13:54 [http-nio-8081-exec-2] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:13:55 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:13:55 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:13:56 [ForkJoinPool.commonPool-worker-1] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 20:13:56 [AsyncTask-1] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:332)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	... 8 common frames omitted
2025-07-29 20:15:18 [http-nio-8081-exec-5] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:15:21 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:15:21 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:15:21 [ForkJoinPool.commonPool-worker-2] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Unexpected error while getting user with user Id: 1
java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 20:15:22 [AsyncTask-2] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ExternalServiceException: External service user-service error: Unexpected error: fallbackValue must not be null
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:332)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: java.lang.NullPointerException: fallbackValue must not be null
	at java.base/java.util.Objects.requireNonNull(Objects.java:259)
	at reactor.core.publisher.Mono.onErrorReturn(Mono.java:3953)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.validateUserExistAsync(AsyncExpenseServiceImpl.java:314)
	... 8 common frames omitted
2025-07-29 20:15:32 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:20:34 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:25:34 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:29:39 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 4212 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:29:39 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:29:39 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:29:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:29:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 197 ms. Found 1 JPA repository interface.
2025-07-29 20:29:43 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:29:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:29:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:29:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:29:44 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:29:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5667 ms
2025-07-29 20:29:45 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:29:45 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:29:45 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:29:46 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:29:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:29:51 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@772bc4c9
2025-07-29 20:29:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:29:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:29:54 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:29:56 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:29:59 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:29:59 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:30:01 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:30:01 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:30:01 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:30:01 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:30:02 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:30:03 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:30:05 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:30:05 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:30:05 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:30:05 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:30:06 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:30:06 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:30:06 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:30:07 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:30:07 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:30:07 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:30:07 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753795807879 with initial instances count: 3
2025-07-29 20:30:07 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:30:07 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753795807887, current=UP, previous=STARTING]
2025-07-29 20:30:07 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:30:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:30:08 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:30:08 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:30:09 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:30:10 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:30:10 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 33.441 seconds (process running for 36.056)
2025-07-29 20:40:10 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 11676 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:40:10 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:40:10 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:40:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:40:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 246 ms. Found 1 JPA repository interface.
2025-07-29 20:40:14 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:40:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:40:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:40:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:40:15 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:40:15 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4873 ms
2025-07-29 20:40:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:40:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:40:16 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:40:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:40:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:40:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59d29065
2025-07-29 20:40:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:40:23 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:40:24 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:40:25 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:40:28 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:40:29 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:40:30 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:40:30 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:40:30 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:40:30 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:40:31 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:40:32 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:40:34 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:40:34 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:40:34 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:40:34 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:40:34 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:40:34 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:40:34 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:40:35 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:40:35 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:40:35 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:40:35 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753796435234 with initial instances count: 1
2025-07-29 20:40:35 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:40:35 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753796435245, current=UP, previous=STARTING]
2025-07-29 20:40:35 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:40:35 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:40:35 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:40:35 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:40:36 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:40:37 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:40:37 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 28.683 seconds (process running for 30.176)
2025-07-29 20:42:03 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 20:42:03 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 20:42:03 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-29 20:42:08 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:42:13 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:42:13 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:42:43 [http-nio-8081-exec-3] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: 606d360a - Message: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 20:42:50 [reactor-http-nio-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:42:58 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:44:43 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 2800 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:44:43 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:44:43 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:44:45 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:44:45 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 177 ms. Found 1 JPA repository interface.
2025-07-29 20:44:46 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:44:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:44:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:44:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:44:47 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:44:47 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3493 ms
2025-07-29 20:44:47 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:44:47 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:44:48 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:44:48 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:44:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:44:52 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5693d1d2
2025-07-29 20:44:52 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:44:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:44:54 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:44:55 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:44:58 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:44:58 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:44:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:44:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:44:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:44:59 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:45:00 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:45:02 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:45:03 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:45:03 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:45:03 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:45:03 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:45:03 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:45:03 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:45:03 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:45:04 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:45:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:45:04 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:45:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753796704469 with initial instances count: 3
2025-07-29 20:45:04 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:45:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753796704475, current=UP, previous=STARTING]
2025-07-29 20:45:04 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:45:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:45:04 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:45:04 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:45:05 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:45:06 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:45:06 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 24.789 seconds (process running for 26.454)
2025-07-29 20:45:10 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 20:45:10 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 20:45:10 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-29 20:45:13 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:45:13 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:45:13 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:45:20 [reactor-http-nio-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:45:21 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:45:21 [AsyncTask-1] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.ResourceNotFoundException: User not found with Id : 1
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.ResourceNotFoundException: User not found with Id : 1
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:155)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 20:46:40 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 6972 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:46:40 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:46:40 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:46:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:46:43 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 313 ms. Found 1 JPA repository interface.
2025-07-29 20:46:44 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:46:45 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:46:46 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:46:46 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:46:46 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:46:46 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5971 ms
2025-07-29 20:46:47 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:46:47 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:46:47 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:46:47 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:46:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:46:51 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7cc3a7f7
2025-07-29 20:46:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:46:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:46:54 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:46:55 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:46:58 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:46:58 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:46:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:46:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:46:59 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:46:59 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:47:01 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:47:02 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:47:03 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:47:03 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:47:04 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:47:04 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:47:04 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:47:04 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:47:04 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:47:05 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:47:05 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:47:05 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:47:05 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753796825011 with initial instances count: 3
2025-07-29 20:47:05 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:47:05 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753796825019, current=UP, previous=STARTING]
2025-07-29 20:47:05 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:47:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:47:05 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:47:05 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:47:06 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:47:07 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:47:07 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 29.662 seconds (process running for 31.052)
2025-07-29 20:47:11 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 20:47:11 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 20:47:11 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-29 20:47:13 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:47:14 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:47:14 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:47:18 [reactor-http-nio-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:47:19 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:47:19 [AsyncTask-1] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 1
java.util.concurrent.CompletionException: com.phuong.exception.BusinessRuleException: Expense account is required
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.phuong.exception.BusinessRuleException: Expense account is required
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$createExpenseAsync$5(AsyncExpenseServiceImpl.java:161)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-29 20:48:07 [http-nio-8081-exec-5] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:48:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:48:07 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:48:10 [reactor-http-nio-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:48:14 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:48:50 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s59ms535s100ns).
2025-07-29 20:51:01 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 6512 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 20:51:01 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 20:51:01 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 20:51:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 20:51:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 192 ms. Found 1 JPA repository interface.
2025-07-29 20:51:05 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 20:51:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 20:51:06 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 20:51:06 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 20:51:06 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 20:51:06 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5595 ms
2025-07-29 20:51:07 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 20:51:07 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 20:51:07 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 20:51:08 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 20:51:08 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 20:51:12 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@34ea86ff
2025-07-29 20:51:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 20:51:12 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 20:51:13 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 20:51:15 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 20:51:17 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 20:51:18 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 20:51:18 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 20:51:18 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 20:51:18 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 20:51:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 20:51:20 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:51:21 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:51:23 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:51:23 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 20:51:23 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 20:51:23 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 20:51:23 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 20:51:23 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 20:51:23 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 20:51:24 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 20:51:24 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 20:51:24 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 20:51:24 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753797084030 with initial instances count: 3
2025-07-29 20:51:24 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 20:51:24 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753797084035, current=UP, previous=STARTING]
2025-07-29 20:51:24 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 20:51:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 20:51:24 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 20:51:24 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 20:51:25 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:51:26 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 20:51:26 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 28.584 seconds (process running for 29.9)
2025-07-29 20:51:29 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 20:51:29 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 20:51:29 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-29 20:51:32 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:51:32 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-29 20:51:32 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:51:38 [reactor-http-nio-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:51:39 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:52:02 [http-nio-8081-exec-3] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: ac629711 - Message: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 20:52:02 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - 
    /* insert for
        com.phuong.model.Expense */insert 
    into
        expense (account, amount, category, date, expense_type, note, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-29 20:52:06 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Syncing expenses with external systems for user: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:52:06 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Expenses synced with external systems for user: 1
2025-07-29 20:52:12 [ForkJoinPool.commonPool-worker-1] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Created expense with Id: 1 for User Id: 1
2025-07-29 20:52:15 [AsyncTask-1] INFO  c.p.c.AsyncExpenseController - Async response: Created expense for user: 1 with Id
2025-07-29 20:53:35 [http-nio-8081-exec-5] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 20:53:35 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:53:35 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 20:53:38 [reactor-http-nio-3] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 20:53:40 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 20:53:43 [ForkJoinPool.commonPool-worker-2] DEBUG org.hibernate.SQL - 
    /* insert for
        com.phuong.model.Expense */insert 
    into
        expense (account, amount, category, date, expense_type, note, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-29 20:54:01 [ForkJoinPool.commonPool-worker-3] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Syncing expenses with external systems for user: 1 on thread: ForkJoinPool.commonPool-worker-3
2025-07-29 20:54:01 [ForkJoinPool.commonPool-worker-3] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Expenses synced with external systems for user: 1
2025-07-29 20:54:15 [ForkJoinPool.commonPool-worker-2] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Created expense with Id: 2 for User Id: 1
2025-07-29 20:54:15 [http-nio-8081-exec-6] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: 90ce6d28 - Message: null
org.springframework.web.context.request.async.AsyncRequestTimeoutException: null
	at org.springframework.web.context.request.async.TimeoutDeferredResultProcessingInterceptor.handleTimeout(TimeoutDeferredResultProcessingInterceptor.java:42)
	at org.springframework.web.context.request.async.DeferredResultInterceptorChain.triggerAfterTimeout(DeferredResultInterceptorChain.java:81)
	at org.springframework.web.context.request.async.WebAsyncManager.lambda$startDeferredResultProcessing$5(WebAsyncManager.java:434)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest.onTimeout(StandardServletAsyncWebRequest.java:186)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:44)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:136)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:135)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 20:54:33 [AsyncTask-2] INFO  c.p.c.AsyncExpenseController - Async response: Created expense for user: 1 with Id
2025-07-29 20:56:13 [http-nio-8081-exec-9] WARN  c.p.exception.GlobalExceptionHandler - Unexpected error - TraceId: ccd69f5d - Message: No static resource eapi/v1/expenses/user/1/expense/1.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource eapi/v1/expenses/user/1/expense/1.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-29 20:56:21 [http-nio-8081-exec-10] INFO  c.p.c.AsyncExpenseController - Async request: Get expenses for user: 1 by Id: 1
2025-07-29 20:56:21 [ForkJoinPool.commonPool-worker-3] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Fetching expense for user Id: 1 by Id: 1 on thread: ForkJoinPool.commonPool-worker-3
2025-07-29 20:56:21 [ForkJoinPool.commonPool-worker-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.id = :id 
        AND e.user.id = :userId */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.id=? 
            and e1_0.user_id=?
2025-07-29 20:56:22 [ForkJoinPool.commonPool-worker-3] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Found expense for user Id: 1 by Id: 1
2025-07-29 20:56:22 [AsyncTask-3] INFO  c.p.c.AsyncExpenseController - Async response: Get expense for user: 1 by Id: 1
2025-07-29 20:56:23 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 20:58:32 [http-nio-8081-exec-4] INFO  c.p.controller.ExpenseController - Received request to get expense for username: phuong by Id: 1
2025-07-29 20:58:32 [http-nio-8081-exec-4] DEBUG c.p.controller.ExpenseController - Getting user by username: phuong
2025-07-29 20:58:37 [http-nio-8081-exec-4] DEBUG c.p.service.impl.ExpenseServiceImpl - Get user by username: phuong
2025-07-29 20:58:40 [http-nio-8081-exec-4] INFO  c.p.service.impl.ExpenseServiceImpl - Found user with username: phuong
2025-07-29 20:58:41 [http-nio-8081-exec-4] DEBUG c.p.service.impl.ExpenseServiceImpl - Fetching expense for user Id: 2 by Id: 1
2025-07-29 20:58:41 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.id = :id 
        AND e.user.id = :userId */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.id=? 
            and e1_0.user_id=?
2025-07-29 20:58:41 [http-nio-8081-exec-4] WARN  c.p.service.impl.ExpenseServiceImpl - Expense not found for user Id: 2 by Id: 1
2025-07-29 20:58:41 [http-nio-8081-exec-4] WARN  c.p.exception.GlobalExceptionHandler - Resource not found - TraceId: a20b33a2 - Message: Expense not found with id : 1
2025-07-29 20:59:00 [http-nio-8081-exec-5] INFO  c.p.controller.ExpenseController - Received request to get expense for username: admin by Id: 1
2025-07-29 20:59:00 [http-nio-8081-exec-5] DEBUG c.p.controller.ExpenseController - Getting user by username: admin
2025-07-29 20:59:04 [http-nio-8081-exec-5] DEBUG c.p.service.impl.ExpenseServiceImpl - Get user by username: admin
2025-07-29 20:59:06 [http-nio-8081-exec-5] INFO  c.p.service.impl.ExpenseServiceImpl - Found user with username: admin
2025-07-29 20:59:06 [http-nio-8081-exec-5] DEBUG c.p.service.impl.ExpenseServiceImpl - Fetching expense for user Id: 1 by Id: 1
2025-07-29 20:59:06 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.id = :id 
        AND e.user.id = :userId */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.id=? 
            and e1_0.user_id=?
2025-07-29 20:59:07 [http-nio-8081-exec-5] INFO  c.p.service.impl.ExpenseServiceImpl - Found expense for user Id: 1 by Id: 1
2025-07-29 20:59:07 [http-nio-8081-exec-5] INFO  c.p.controller.ExpenseController - Getting expense for username: admin by Id: 1
2025-07-29 20:59:37 [http-nio-8081-exec-6] INFO  c.p.c.AsyncExpenseController - Async request: Get all expenses for user: 1
2025-07-29 20:59:37 [ForkJoinPool.commonPool-worker-4] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Fetching all expenses for user Id: 1 on thread: ForkJoinPool.commonPool-worker-4
2025-07-29 20:59:37 [ForkJoinPool.commonPool-worker-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.user.id = :userId 
    ORDER BY
        e.date DESC */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.user_id=? 
        order by
            e1_0.date desc
2025-07-29 20:59:37 [ForkJoinPool.commonPool-worker-4] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Fetching 2 expenses for user Id: 1
2025-07-29 20:59:37 [AsyncTask-4] INFO  c.p.c.AsyncExpenseController - Async response: Get 2 expenses for user: 1
2025-07-29 21:00:45 [http-nio-8081-exec-10] INFO  c.p.c.AsyncExpenseController - Async request: Create expense for user: 1
2025-07-29 21:00:45 [ForkJoinPool.commonPool-worker-5] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating new expense for User Id: 1 on thread: ForkJoinPool.commonPool-worker-5
2025-07-29 21:00:45 [ForkJoinPool.commonPool-worker-5] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 1 on thread: ForkJoinPool.commonPool-worker-5
2025-07-29 21:00:49 [reactor-http-nio-5] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 1
2025-07-29 21:00:50 [ForkJoinPool.commonPool-worker-5] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 1
2025-07-29 21:00:54 [ForkJoinPool.commonPool-worker-5] DEBUG org.hibernate.SQL - 
    /* insert for
        com.phuong.model.Expense */insert 
    into
        expense (account, amount, category, date, expense_type, note, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-29 21:00:56 [ForkJoinPool.commonPool-worker-6] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Syncing expenses with external systems for user: 1 on thread: ForkJoinPool.commonPool-worker-6
2025-07-29 21:00:57 [ForkJoinPool.commonPool-worker-6] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Expenses synced with external systems for user: 1
2025-07-29 21:01:10 [ForkJoinPool.commonPool-worker-5] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Created expense with Id: 3 for User Id: 1
2025-07-29 21:01:10 [AsyncTask-5] INFO  c.p.c.AsyncExpenseController - Async response: Created expense for user: 1 with Id
2025-07-29 21:01:23 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:03:44 [http-nio-8081-exec-4] INFO  c.p.c.AsyncExpenseController - Async request: Create 2 expenses for user: 2
2025-07-29 21:03:44 [ForkJoinPool.commonPool-worker-7] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Creating 2 expenses asynchronously on thread: 2
2025-07-29 21:03:50 [ForkJoinPool.commonPool-worker-7] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Validating user exists: 2 on thread: ForkJoinPool.commonPool-worker-7
2025-07-29 21:03:52 [reactor-http-nio-6] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Get user: 2
2025-07-29 21:03:53 [ForkJoinPool.commonPool-worker-7] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - User found: 2
2025-07-29 21:03:54 [ForkJoinPool.commonPool-worker-7] DEBUG org.hibernate.SQL - 
    /* insert for
        com.phuong.model.Expense */insert 
    into
        expense (account, amount, category, date, expense_type, note, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-29 21:03:54 [ForkJoinPool.commonPool-worker-7] DEBUG org.hibernate.SQL - 
    /* insert for
        com.phuong.model.Expense */insert 
    into
        expense (account, amount, category, date, expense_type, note, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-07-29 21:03:54 [ForkJoinPool.commonPool-worker-8] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Syncing expenses with external systems for user: 2 on thread: ForkJoinPool.commonPool-worker-8
2025-07-29 21:03:54 [ForkJoinPool.commonPool-worker-7] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Created 2 expenses for User Id: 2
2025-07-29 21:03:54 [AsyncTask-1] INFO  c.p.c.AsyncExpenseController - Async response: Created 2 expenses for user: 2
2025-07-29 21:03:55 [ForkJoinPool.commonPool-worker-8] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Expenses synced with external systems for user: 2
2025-07-29 21:06:23 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:06:55 [http-nio-8081-exec-9] INFO  c.p.c.AsyncExpenseController - Async request: Get expenses for user: 2 between: 2025-07-01 and 2025-07-29
2025-07-29 21:06:55 [ForkJoinPool.commonPool-worker-9] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Fetching expenses for user Id: 2 between 2025-07-01 and 2025-07-29 on thread ForkJoinPool.commonPool-worker-9
2025-07-29 21:06:55 [ForkJoinPool.commonPool-worker-9] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Database error while getting expenses by date range for user Id: 2
org.springframework.dao.InvalidDataAccessApiUsageException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy180.findByUserIdAndDateBetweenOrderByDateDesc(Unknown Source)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:104)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: org.hibernate.query.QueryArgumentException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:85)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:32)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:366)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:142)
	at org.hibernate.query.spi.AbstractCommonQueryContract.setParameter(AbstractCommonQueryContract.java:835)
	at org.hibernate.query.spi.AbstractSelectionQuery.setParameter(AbstractSelectionQuery.java:602)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:1061)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:125)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:326)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$4(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:140)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:86)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:78)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:100)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:135)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:251)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:130)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 13 common frames omitted
2025-07-29 21:06:55 [AsyncTask-2] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 2 by date range
java.util.concurrent.CompletionException: java.lang.RuntimeException: Failed to get expenses by date range
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Failed to get expenses by date range
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:114)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy180.findByUserIdAndDateBetweenOrderByDateDesc(Unknown Source)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:104)
	... 7 common frames omitted
Caused by: org.hibernate.query.QueryArgumentException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:85)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:32)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:366)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:142)
	at org.hibernate.query.spi.AbstractCommonQueryContract.setParameter(AbstractCommonQueryContract.java:835)
	at org.hibernate.query.spi.AbstractSelectionQuery.setParameter(AbstractSelectionQuery.java:602)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:1061)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:125)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:326)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$4(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:140)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:86)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:78)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:100)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:135)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:251)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:130)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 13 common frames omitted
2025-07-29 21:09:48 [http-nio-8081-exec-2] INFO  c.p.c.AsyncExpenseController - Async request: Get expenses for user: 2 between: 2025-07-01 and 2025-07-29
2025-07-29 21:09:49 [ForkJoinPool.commonPool-worker-10] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Fetching expenses for user Id: 2 between 2025-07-01 and 2025-07-29 on thread ForkJoinPool.commonPool-worker-10
2025-07-29 21:09:49 [ForkJoinPool.commonPool-worker-10] ERROR c.p.s.impl.AsyncExpenseServiceImpl - Database error while getting expenses by date range for user Id: 2
org.springframework.dao.InvalidDataAccessApiUsageException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy180.findByUserIdAndDateBetweenOrderByDateDesc(Unknown Source)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:104)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: org.hibernate.query.QueryArgumentException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:85)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:32)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:366)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:142)
	at org.hibernate.query.spi.AbstractCommonQueryContract.setParameter(AbstractCommonQueryContract.java:835)
	at org.hibernate.query.spi.AbstractSelectionQuery.setParameter(AbstractSelectionQuery.java:602)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:1061)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:125)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:326)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$4(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:140)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:86)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:78)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:100)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:135)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:251)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:130)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 13 common frames omitted
2025-07-29 21:09:49 [AsyncTask-3] ERROR c.p.c.AsyncExpenseController - Error getting expenses by user: 2 by date range
java.util.concurrent.CompletionException: java.lang.RuntimeException: Failed to get expenses by date range
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:78)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Failed to get expenses by date range
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:114)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy180.findByUserIdAndDateBetweenOrderByDateDesc(Unknown Source)
	at com.phuong.service.impl.AsyncExpenseServiceImpl.lambda$getExpensesByDateRangeAsync$2(AsyncExpenseServiceImpl.java:104)
	... 7 common frames omitted
Caused by: org.hibernate.query.QueryArgumentException: Argument [2025-07-01T00:00] of type [java.time.LocalDateTime] did not match parameter type [java.time.LocalDate (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:85)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:32)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:366)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:142)
	at org.hibernate.query.spi.AbstractCommonQueryContract.setParameter(AbstractCommonQueryContract.java:835)
	at org.hibernate.query.spi.AbstractSelectionQuery.setParameter(AbstractSelectionQuery.java:602)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:1061)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:125)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:326)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$4(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:140)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:117)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:86)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:78)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:100)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:135)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:251)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:130)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:93)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:160)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:148)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 13 common frames omitted
2025-07-29 21:11:23 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:16:54 [main] INFO  c.phuong.ExpenseServiceApplication - Starting ExpenseServiceApplication using Java 21.0.8 with PID 9428 (F:\Spring Boot\expense-microservice\expense-service\build\classes\java\main started by Phuong in F:\Spring Boot\expense-microservice)
2025-07-29 21:16:54 [main] DEBUG c.phuong.ExpenseServiceApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-29 21:16:54 [main] INFO  c.phuong.ExpenseServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-29 21:16:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-29 21:16:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 203 ms. Found 1 JPA repository interface.
2025-07-29 21:16:58 [main] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=675ba646-a2bf-3bc7-b908-d01afc36d32f
2025-07-29 21:16:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-07-29 21:16:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-29 21:16:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-29 21:16:59 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-29 21:16:59 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4280 ms
2025-07-29 21:16:59 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-29 21:17:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-29 21:17:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-29 21:17:00 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-29 21:17:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-29 21:17:05 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@43e2b8da
2025-07-29 21:17:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-29 21:17:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-29 21:17:08 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-29 21:17:10 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-29 21:17:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-29 21:17:14 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-29 21:17:14 [main] INFO  com.phuong.config.AsyncConfig - Initialized general task executor with core pool size 5, max pool size: 20
2025-07-29 21:17:14 [main] INFO  com.phuong.config.AsyncConfig - Initialized heavy task executor with core pool size 2, max pool size: 10
2025-07-29 21:17:14 [main] INFO  com.phuong.config.AsyncConfig - Initialized external task executor with core pool size 3, max pool size: 15
2025-07-29 21:17:14 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-29 21:17:16 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 21:17:17 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 21:17:19 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 21:17:19 [main] INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-07-29 21:17:19 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-07-29 21:17:19 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-07-29 21:17:19 [main] INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-07-29 21:17:19 [main] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Application is null : false
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-07-29 21:17:19 [main] INFO  c.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-07-29 21:17:20 [main] INFO  c.netflix.discovery.DiscoveryClient - The response status is 200
2025-07-29 21:17:20 [main] INFO  c.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-07-29 21:17:20 [main] INFO  c.n.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-07-29 21:17:20 [main] INFO  c.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1753798640980 with initial instances count: 3
2025-07-29 21:17:20 [main] INFO  o.s.c.n.e.s.EurekaServiceRegistry - Registering application EXPENSE-SERVICE with eureka with status UP
2025-07-29 21:17:20 [main] INFO  c.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1753798640986, current=UP, previous=STARTING]
2025-07-29 21:17:20 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081: registering service...
2025-07-29 21:17:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-07-29 21:17:21 [main] INFO  o.s.c.n.e.s.EurekaAutoServiceRegistration - Updating port to 8081
2025-07-29 21:17:21 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  c.netflix.discovery.DiscoveryClient - DiscoveryClient_EXPENSE-SERVICE/localhost:expense-service:8081 - registration status: 204
2025-07-29 21:17:22 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 21:17:23 [main] INFO  o.s.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-07-29 21:17:23 [main] INFO  c.phuong.ExpenseServiceApplication - Started ExpenseServiceApplication in 30.697 seconds (process running for 32.795)
2025-07-29 21:17:59 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-29 21:17:59 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-29 21:17:59 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-29 21:17:59 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Get expenses for user: 2 between: 2025-07-01 and 2025-07-29
2025-07-29 21:17:59 [ForkJoinPool.commonPool-worker-1] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Fetching expenses for user Id: 2 between 2025-07-01 and 2025-07-29 on thread ForkJoinPool.commonPool-worker-1
2025-07-29 21:17:59 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.user.id = :userId 
        AND e.date BETWEEN :startDate AND :endDate 
    ORDER BY
        e.date DESC */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.user_id=? 
            and e1_0.date between ? and ? 
        order by
            e1_0.date desc
2025-07-29 21:18:00 [ForkJoinPool.commonPool-worker-1] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Getting 2 expenses for user Id: 2 in date range
2025-07-29 21:18:00 [AsyncTask-1] INFO  c.p.c.AsyncExpenseController - Async response: Get 2 expenses for user: 2 by date range
2025-07-29 21:19:13 [http-nio-8081-exec-6] WARN  c.p.exception.GlobalExceptionHandler - Missing parameter - TraceId: fe528ba5 - Parameter: startDate
2025-07-29 21:19:45 [http-nio-8081-exec-8] INFO  c.p.c.AsyncExpenseController - Async request: Generating summary expense for user: 2
2025-07-29 21:19:46 [ForkJoinPool.commonPool-worker-2] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Generating expense summary for user Id: 2 on thread: ForkJoinPool.commonPool-worker-2
2025-07-29 21:19:46 [ForkJoinPool.commonPool-worker-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.user.id = :userId 
        AND e.date BETWEEN :startDate AND :endDate 
    ORDER BY
        e.date DESC */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.user_id=? 
            and e1_0.date between ? and ? 
        order by
            e1_0.date desc
2025-07-29 21:19:46 [ForkJoinPool.commonPool-worker-2] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Generated expense summary for user Id: 2 - Total: 3000.0, count: 2
2025-07-29 21:19:46 [AsyncTask-2] INFO  c.p.c.AsyncExpenseController - Async response: Generated summary expense for user: 2
2025-07-29 21:21:32 [http-nio-8081-exec-1] INFO  c.p.c.AsyncExpenseController - Async request: Generating monthly report for user: 2 for 7/2025
2025-07-29 21:21:33 [ForkJoinPool.commonPool-worker-3] DEBUG c.p.s.impl.AsyncExpenseServiceImpl - Generating monthly report for user: 2 for 7/2025 on thread: ForkJoinPool.commonPool-worker-3
2025-07-29 21:21:33 [ForkJoinPool.commonPool-worker-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        e 
    FROM
        Expense e 
    WHERE
        e.user.id = :userId 
        AND e.date BETWEEN :startDate AND :endDate 
    ORDER BY
        e.date DESC */ select
            e1_0.id,
            e1_0.account,
            e1_0.amount,
            e1_0.category,
            e1_0.date,
            e1_0.expense_type,
            e1_0.note,
            e1_0.user_id 
        from
            expense e1_0 
        where
            e1_0.user_id=? 
            and e1_0.date between ? and ? 
        order by
            e1_0.date desc
2025-07-29 21:21:33 [ForkJoinPool.commonPool-worker-3] INFO  c.p.s.impl.AsyncExpenseServiceImpl - Generating monthly report for user: 2 - 2 expenses processed
2025-07-29 21:21:33 [HeavyTask-1] INFO  c.p.c.AsyncExpenseController - Async response: Generated monthly report for user: 2
2025-07-29 21:22:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:27:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:32:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:37:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:42:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:47:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-07-29 21:52:19 [AsyncResolver-bootstrap-executor-%d] INFO  c.n.d.s.r.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
